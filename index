import React, { useState, useEffect, useRef } from 'react';

// --- DATABASE ---
// A more organized data structure for different philosophical traditions.
const philosophyData = {
    "Buddhist Philosophy": [
        { id: 101, title: "The Four Noble Truths: The Core of Buddhist Teaching", publishedDate: "July 26, 2025", excerpt: "An introduction to the fundamental framework of Buddhist thought and the path to enlightenment.", imageUrl: "https://placehold.co/1200x500/f39c12/ecf0f1?text=Four+Noble+Truths", youtubeId: "example", content: "<p>Content for The Four Noble Truths.</p>" },
        { id: 102, title: "Anatta: The Doctrine of No-Self", publishedDate: "July 25, 2025", excerpt: "Exploring the challenging concept that there is no permanent, underlying substance that can be called the soul.", imageUrl: "https://placehold.co/1200x500/e67e22/ecf0f1?text=No-Self", youtubeId: "example", content: "<p>Content for Anatta.</p>" },
        { id: 103, title: "Karma and Rebirth: The Cycle of Samsara", publishedDate: "July 24, 2025", excerpt: "Understanding the law of moral causation and the process of rebirth in Buddhist philosophy.", imageUrl: "https://placehold.co/1200x500/d35400/ecf0f1?text=Samsara", youtubeId: "example", content: "<p>Content for Karma and Rebirth.</p>" },
        { id: 104, title: "Zen and the Art of Mindfulness", publishedDate: "July 23, 2025", excerpt: "A look into the practice of Zen Buddhism and the cultivation of present-moment awareness.", imageUrl: "https://placehold.co/1200x500/e74c3c/ecf0f1?text=Zen+Mindfulness", youtubeId: "example", content: "<p>Content for Zen.</p>" },
        { id: 105, title: "The Bodhisattva Path", publishedDate: "July 22, 2025", excerpt: "Exploring the Mahayana ideal of an enlightened being who delays their own nirvana to help others.", imageUrl: "https://placehold.co/1200x500/f39c12/ecf0f1?text=Bodhisattva", youtubeId: "example", content: "<p>Content for The Bodhisattva Path.</p>" },
        { id: 106, title: "Sunyata: The Concept of Emptiness", publishedDate: "July 21, 2025", excerpt: "A deep dive into the Mahayana doctrine of emptiness, a key to understanding reality.", imageUrl: "https://placehold.co/1200x500/e67e22/ecf0f1?text=Sunyata", youtubeId: "example", content: "<p>Content for Sunyata.</p>" },
        { id: 107, title: "The Eightfold Path", publishedDate: "July 20, 2025", excerpt: "A practical guide to the steps one must practice to achieve Nirvana.", imageUrl: "https://placehold.co/1200x500/d35400/ecf0f1?text=Eightfold+Path", youtubeId: "example", content: "<p>Content for The Eightfold Path.</p>" },
        { id: 108, title: "Vipassanā Meditation", publishedDate: "July 19, 2025", excerpt: "Understanding the practice of insight meditation and its role in self-observation.", imageUrl: "https://placehold.co/1200x500/e74c3c/ecf0f1?text=Vipassanā", youtubeId: "example", content: "<p>Content for Vipassanā Meditation.</p>" }
    ],
    "Chinese Philosophy": [
        { id: 201, title: "Confucianism: The Pursuit of Social Harmony", publishedDate: "July 22, 2025", excerpt: "Examining the ethical and philosophical system developed by Confucius, focusing on morality, family, and society.", imageUrl: "https://placehold.co/1200x500/27ae60/ecf0f1?text=Confucianism", youtubeId: "example", content: "<p>Content for Confucianism.</p>" },
        { id: 202, title: "Taoism and The Way of Nature", publishedDate: "July 21, 2025", excerpt: "An exploration of the Tao Te Ching and the concept of living in harmony with the natural flow of the universe.", imageUrl: "https://placehold.co/1200x500/2ecc71/ecf0f1?text=Taoism", youtubeId: "example", content: "<p>Content for Taoism.</p>" },
        { id: 203, title: "Legalism: The Philosophy of Power and Law", publishedDate: "July 20, 2025", excerpt: "A look at the pragmatic political philosophy that emphasizes strict laws and absolute power of the state.", imageUrl: "https://placehold.co/1200x500/16a085/ecf0f1?text=Legalism", youtubeId: "example", content: "<p>Content for Legalism.</p>" },
        { id: 204, title: "The I Ching: The Ancient Book of Changes", publishedDate: "July 19, 2025", excerpt: "Delving into one of the oldest Chinese classical texts and its use as a tool for divination and wisdom.", imageUrl: "https://placehold.co/1200x500/1abc9c/ecf0f1?text=I+Ching", youtubeId: "example", content: "<p>Content for I Ching.</p>" },
        { id: 205, title: "Mohism: Universal Love and Logic", publishedDate: "July 18, 2025", excerpt: "Exploring the teachings of Mozi, a philosophy of impartial care and consequentialism.", imageUrl: "https://placehold.co/1200x500/27ae60/ecf0f1?text=Mohism", youtubeId: "example", content: "<p>Content for Mohism.</p>" },
        { id: 206, title: "The Mandate of Heaven", publishedDate: "July 17, 2025", excerpt: "Understanding the ancient Chinese belief that heaven grants emperors the right to rule.", imageUrl: "https://placehold.co/1200x500/2ecc71/ecf0f1?text=Mandate+of+Heaven", youtubeId: "example", content: "<p>Content for The Mandate of Heaven.</p>" },
        { id: 207, title: "Zhuangzi's Butterfly Dream", publishedDate: "July 16, 2025", excerpt: "A famous Taoist parable questioning the nature of reality and the self.", imageUrl: "https://placehold.co/1200x500/16a085/ecf0f1?text=Zhuangzi", youtubeId: "example", content: "<p>Content for Zhuangzi's Butterfly Dream.</p>" },
        { id: 208, title: "The Art of War by Sun Tzu", publishedDate: "July 15, 2025", excerpt: "Beyond military strategy, exploring the philosophical applications of this ancient text.", imageUrl: "https://placehold.co/1200x500/1abc9c/ecf0f1?text=The+Art+of+War", youtubeId: "example", content: "<p>Content for The Art of War.</p>" }
    ],
    "Japanese Philosophy": [
        { id: 301, title: "Wabi-Sabi: The Beauty of Imperfection", publishedDate: "July 18, 2025", excerpt: "Understanding the Japanese aesthetic centered on the acceptance of transience and imperfection.", imageUrl: "https://placehold.co/1200x500/8e44ad/ecf0f1?text=Wabi-Sabi", youtubeId: "example", content: "<p>Content for Wabi-Sabi.</p>" },
        { id: 302, title: "Bushido: The Way of the Warrior", publishedDate: "July 17, 2025", excerpt: "Exploring the moral code of the samurai, emphasizing honor, courage, and loyalty.", imageUrl: "https://placehold.co/1200x500/9b59b6/ecf0f1?text=Bushido", youtubeId: "example", content: "<p>Content for Bushido.</p>" },
        { id: 303, title: "Shinto: The Indigenous Spirituality of Japan", publishedDate: "July 16, 2025", excerpt: "A look into the animistic beliefs and practices that form the foundation of Japanese culture.", imageUrl: "https://placehold.co/1200x500/3498db/ecf0f1?text=Shinto", youtubeId: "example", content: "<p>Content for Shinto.</p>" },
        { id: 304, title: "The Kyoto School: Modern Japanese Philosophy", publishedDate: "July 15, 2025", excerpt: "An introduction to the 20th-century philosophical movement that integrated Western philosophy with Eastern thought.", imageUrl: "https://placehold.co/1200x500/2980b9/ecf0f1?text=Kyoto+School", youtubeId: "example", content: "<p>Content for The Kyoto School.</p>" },
        { id: 305, title: "Ikigai: A Reason for Being", publishedDate: "July 14, 2025", excerpt: "Exploring the Japanese concept of finding purpose and fulfillment in life.", imageUrl: "https://placehold.co/1200x500/8e44ad/ecf0f1?text=Ikigai", youtubeId: "example", content: "<p>Content for Ikigai.</p>" },
        { id: 306, title: "Mono no Aware: The Pathos of Things", publishedDate: "July 13, 2025", excerpt: "Understanding the gentle sadness and awareness of the transience of all things.", imageUrl: "https://placehold.co/1200x500/9b59b6/ecf0f1?text=Mono+no+Aware", youtubeId: "example", content: "<p>Content for Mono no Aware.</p>" },
        { id: 307, title: "Kaizen: The Philosophy of Continuous Improvement", publishedDate: "July 12, 2025", excerpt: "How the principle of making small, incremental changes can lead to profound results.", imageUrl: "https://placehold.co/1200x500/3498db/ecf0f1?text=Kaizen", youtubeId: "example", content: "<p>Content for Kaizen.</p>" },
        { id: 308, title: "Dogen and Soto Zen", publishedDate: "July 11, 2025", excerpt: "An introduction to the founder of the Soto school of Zen in Japan and his teachings.", imageUrl: "https://placehold.co/1200x500/2980b9/ecf0f1?text=Dogen", youtubeId: "example", content: "<p>Content for Dogen and Soto Zen.</p>" }
    ],
    "Indian Philosophy": [
        { id: 401, title: "The Vedas and Upanishads: Foundations of Hinduism", publishedDate: "July 14, 2025", excerpt: "An overview of the ancient scriptures that form the basis of Hindu philosophical thought.", imageUrl: "https://placehold.co/1200x500/c0392b/ecf0f1?text=The+Vedas", youtubeId: "example", content: "<p>Content for The Vedas.</p>" },
        { id: 402, title: "Advaita Vedanta: The Philosophy of Non-Duality", publishedDate: "July 13, 2025", excerpt: "Exploring the concept that the individual self (Atman) is identical to the ultimate reality (Brahman).", imageUrl: "https://placehold.co/1200x500/e74c3c/ecf0f1?text=Advaita+Vedanta", youtubeId: "example", content: "<p>Content for Advaita Vedanta.</p>" },
        { id: 403, title: "Yoga Philosophy: The Path of Patanjali", publishedDate: "July 12, 2025", excerpt: "Beyond the physical postures, a look at the philosophical system of the Yoga Sutras.", imageUrl: "https://placehold.co/1200x500/d35400/ecf0f1?text=Yoga+Philosophy", youtubeId: "example", content: "<p>Content for Yoga Philosophy.</p>" },
        { id: 404, title: "Jainism: The Principle of Ahimsa (Non-Violence)", publishedDate: "July 11, 2025", excerpt: "Understanding the core tenet of Jainism and its profound implications for ethical living.", imageUrl: "https://placehold.co/1200x500/f39c12/ecf0f1?text=Jainism", youtubeId: "example", content: "<p>Content for Jainism.</p>" },
        { id: 405, title: "The Bhagavad Gita: A Dialogue on Duty", publishedDate: "July 10, 2025", excerpt: "Analyzing the key philosophical themes of this revered Hindu scripture.", imageUrl: "https://placehold.co/1200x500/c0392b/ecf0f1?text=Bhagavad+Gita", youtubeId: "example", content: "<p>Content for The Bhagavad Gita.</p>" },
        { id: 406, title: "Samkhya: The Dualistic Realism", publishedDate: "July 9, 2025", excerpt: "An overview of one of the six orthodox schools of Hindu philosophy.", imageUrl: "https://placehold.co/1200x500/e74c3c/ecf0f1?text=Samkhya", youtubeId: "example", content: "<p>Content for Samkhya.</p>" },
        { id: 407, title: "Nyaya: The School of Logic", publishedDate: "July 8, 2025", excerpt: "Exploring the Indian philosophical school focused on logic and epistemology.", imageUrl: "https://placehold.co/1200x500/d35400/ecf0f1?text=Nyaya", youtubeId: "example", content: "<p>Content for Nyaya.</p>" },
        { id: 408, title: "Charvaka: The Ancient Atheists", publishedDate: "July 7, 2025", excerpt: "A look at the materialist and skeptical school of thought in ancient India.", imageUrl: "https://placehold.co/1200x500/f39c12/ecf0f1?text=Charvaka", youtubeId: "example", content: "<p>Content for Charvaka.</p>" }
    ],
    "Arab Philosophy": [
        { id: 501, title: "Al-Kindi: The Philosopher of the Arabs", publishedDate: "July 10, 2025", excerpt: "An introduction to the first major Islamic philosopher and his work on integrating Greek philosophy.", imageUrl: "https://placehold.co/1200x500/16a085/ecf0f1?text=Al-Kindi", youtubeId: "example", content: "<p>Content for Al-Kindi.</p>" },
        { id: 502, title: "Avicenna (Ibn Sina): The Polymath of the Islamic Golden Age", publishedDate: "July 9, 2025", excerpt: "Exploring the vast contributions of Avicenna to medicine, philosophy, and science.", imageUrl: "https://placehold.co/1200x500/1abc9c/ecf0f1?text=Avicenna", youtubeId: "example", content: "<p>Content for Avicenna.</p>" },
        { id: 503, title: "Averroes (Ibn Rushd): The Great Commentator", publishedDate: "July 8, 2025", excerpt: "A look at his efforts to reconcile Aristotelian philosophy with Islamic thought.", imageUrl: "https://placehold.co/1200x500/2ecc71/ecf0f1?text=Averroes", youtubeId: "example", content: "<p>Content for Averroes.</p>" },
        { id: 504, title: "Sufism: The Mystical Dimension of Islam", publishedDate: "July 7, 2025", excerpt: "Delving into the inner, mystical, or psycho-spiritual dimension of Islam.", imageUrl: "https://placehold.co/1200x500/27ae60/ecf0f1?text=Sufism", youtubeId: "example", content: "<p>Content for Sufism.</p>" },
        { id: 505, title: "Al-Ghazali's Critique of Philosophy", publishedDate: "July 6, 2025", excerpt: "Examining the influential critique that reshaped the course of Islamic philosophy.", imageUrl: "https://placehold.co/1200x500/16a085/ecf0f1?text=Al-Ghazali", youtubeId: "example", content: "<p>Content for Al-Ghazali.</p>" },
        { id: 506, title: "Ibn Khaldun and the Science of Civilization", publishedDate: "July 5, 2025", excerpt: "An introduction to the forerunner of modern historiography, sociology, and economics.", imageUrl: "https://placehold.co/1200x500/1abc9c/ecf0f1?text=Ibn+Khaldun", youtubeId: "example", content: "<p>Content for Ibn Khaldun.</p>" },
        { id: 507, title: "The Brethren of Purity (Ikhwan al-Safa)", publishedDate: "July 4, 2025", excerpt: "Exploring the anonymous encyclopedists whose works synthesized various philosophical traditions.", imageUrl: "https://placehold.co/1200x500/2ecc71/ecf0f1?text=Brethren+of+Purity", youtubeId: "example", content: "<p>Content for The Brethren of Purity.</p>" },
        { id: 508, title: "Mulla Sadra and the Transcendent Theosophy", publishedDate: "July 3, 2025", excerpt: "A look into the Persian philosopher who synthesized various strands of Islamic philosophy.", imageUrl: "https://placehold.co/1200x500/27ae60/ecf0f1?text=Mulla+Sadra", youtubeId: "example", content: "<p>Content for Mulla Sadra.</p>" }
    ],
    "Latin American Philosophy": [
        { id: 601, title: "The Philosophy of Liberation", publishedDate: "July 6, 2025", excerpt: "An exploration of the 20th-century movement focusing on social and political liberation from oppression.", imageUrl: "https://placehold.co/1200x500/c0392b/ecf0f1?text=Liberation", youtubeId: "example", content: "<p>Content for Philosophy of Liberation.</p>" },
        { id: 602, title: "Leopoldo Zea and the Latin American Identity", publishedDate: "July 5, 2025", excerpt: "Examining the work of one of the key thinkers on the concept of a unique Latin American philosophy.", imageUrl: "https://placehold.co/1200x500/e74c3c/ecf0f1?text=Leopoldo+Zea", youtubeId: "example", content: "<p>Content for Leopoldo Zea.</p>" },
        { id: 603, title: "Sor Juana Inés de la Cruz: A Feminist Voice", publishedDate: "July 4, 2025", excerpt: "A look at the life and work of the 17th-century nun, poet, and philosopher who championed women's rights.", imageUrl: "https://placehold.co/1200x500/d35400/ecf0f1?text=Sor+Juana", youtubeId: "example", content: "<p>Content for Sor Juana.</p>" },
        { id: 604, title: "The Concept of 'Mestizaje' in Philosophy", publishedDate: "July 3, 2025", excerpt: "Understanding the philosophical implications of cultural and racial mixing in Latin America.", imageUrl: "https://placehold.co/1200x500/f39c12/ecf0f1?text=Mestizaje", youtubeId: "example", content: "<p>Content for Mestizaje.</p>" },
        { id: 605, title: "Enrique Dussel's Ethics of Liberation", publishedDate: "July 2, 2025", excerpt: "A key figure in the Philosophy of Liberation and his ethical proposals.", imageUrl: "https://placehold.co/1200x500/c0392b/ecf0f1?text=Enrique+Dussel", youtubeId: "example", content: "<p>Content for Enrique Dussel.</p>" },
        { id: 606, title: "José Vasconcelos and 'La Raza Cósmica'", publishedDate: "July 1, 2025", excerpt: "Exploring the idea of a fifth, 'cosmic' race that would unite all humanity.", imageUrl: "https://placehold.co/1200x500/e74c3c/ecf0f1?text=La+Raza+Cósmica", youtubeId: "example", content: "<p>Content for José Vasconcelos.</p>" },
        { id: 607, title: "The Zapatista Movement's Philosophy", publishedDate: "June 30, 2025", excerpt: "Beyond politics, understanding the philosophical underpinnings of the Zapatistas.", imageUrl: "https://placehold.co/1200x500/d35400/ecf0f1?text=Zapatistas", youtubeId: "example", content: "<p>Content for The Zapatista Movement.</p>" },
        { id: 608, title: "Paulo Freire and the Pedagogy of the Oppressed", publishedDate: "June 29, 2025", excerpt: "A look at the influential educational philosophy for liberation and empowerment.", imageUrl: "https://placehold.co/1200x500/f39c12/ecf0f1?text=Paulo+Freire", youtubeId: "example", content: "<p>Content for Paulo Freire.</p>" }
    ],
    "African Philosophy": [
        { id: 701, title: "Ubuntu: The Philosophy of Human-ness", publishedDate: "July 2, 2025", excerpt: "'I am because we are' - exploring the Southern African concept of interconnectedness and community.", imageUrl: "https://placehold.co/1200x500/8e44ad/ecf0f1?text=Ubuntu", youtubeId: "example", content: "<p>Content for Ubuntu.</p>" },
        { id: 702, title: "Frantz Fanon: The Psychology of Colonialism", publishedDate: "July 1, 2025", excerpt: "A deep dive into Fanon's critical analysis of the psychological impact of colonization.", imageUrl: "https://placehold.co/1200x500/9b59b6/ecf0f1?text=Frantz+Fanon", youtubeId: "example", content: "<p>Content for Frantz Fanon.</p>" },
        { id: 703, title: "Ethnophilosophy: The Debate on African Thought", publishedDate: "June 30, 2025", excerpt: "Examining the controversy around defining a collective, traditional African philosophy.", imageUrl: "https://placehold.co/1200x500/3498db/ecf0f1?text=Ethnophilosophy", youtubeId: "example", content: "<p>Content for Ethnophilosophy.</p>" },
        { id: 704, title: "The Akan Concept of Personhood", publishedDate: "June 29, 2025", excerpt: "A look into the West African Akan people's complex understanding of the self and community.", imageUrl: "https://placehold.co/1200x500/2980b9/ecf0f1?text=Akan+Personhood", youtubeId: "example", content: "<p>Content for Akan Personhood.</p>" },
        { id: 705, title: "Négritude as a Philosophical Movement", publishedDate: "June 28, 2025", excerpt: "Exploring the literary and ideological movement developed by French-speaking black intellectuals.", imageUrl: "https://placehold.co/1200x500/8e44ad/ecf0f1?text=Négritude", youtubeId: "example", content: "<p>Content for Négritude.</p>" },
        { id: 706, title: "Kwame Anthony Appiah on Cosmopolitanism", publishedDate: "June 27, 2025", excerpt: "A look at the contemporary philosopher's work on identity and global citizenship.", imageUrl: "https://placehold.co/1200x500/9b59b6/ecf0f1?text=Appiah", youtubeId: "example", content: "<p>Content for Kwame Anthony Appiah.</p>" },
        { id: 707, title: "The Ma'at Principles of Ancient Egypt", publishedDate: "June 26, 2025", excerpt: "Understanding the ancient Egyptian concepts of truth, balance, order, and justice.", imageUrl: "https://placehold.co/1200x500/3498db/ecf0f1?text=Ma'at", youtubeId: "example", content: "<p>Content for The Ma'at Principles.</p>" },
        { id: 708, title: "Henry Odera Oruka's Sage Philosophy", publishedDate: "June 25, 2025", excerpt: "A project to preserve the philosophical thoughts of indigenous Kenyan sages.", imageUrl: "https://placehold.co/1200x500/2980b9/ecf0f1?text=Sage+Philosophy", youtubeId: "example", content: "<p>Content for Henry Odera Oruka.</p>" }
    ]
};

const booksData = {
    "General & Western Philosophy": [
        { id: 1, title: "Meditations", author: "Marcus Aurelius", imageUrl: "https://placehold.co/300x450/34495e/ecf0f1?text=Meditations", amazonUrl: "#" },
        { id: 3, title: "The Republic", author: "Plato", imageUrl: "https://placehold.co/300x450/7f8c8d/ecf0f1?text=The+Republic", amazonUrl: "#" },
        { id: 4, title: "Thus Spoke Zarathustra", author: "Friedrich Nietzsche", imageUrl: "https://placehold.co/300x450/95a5a6/ecf0f1?text=Zarathustra", amazonUrl: "#" },
        { id: 5, title: "The Myth of Sisyphus", author: "Albert Camus", imageUrl: "https://placehold.co/300x450/c0392b/ecf0f1?text=Sisyphus", amazonUrl: "#" },
    ],
    "Chinese Philosophy": [
        { id: 2, title: "Tao Te Ching", author: "Lao Tzu", imageUrl: "https://placehold.co/300x450/2c3e50/bdc3c7?text=Tao+Te+Ching", amazonUrl: "#" },
        { id: 6, title: "The Art of War", author: "Sun Tzu", imageUrl: "https://placehold.co/300x450/16a085/ecf0f1?text=The+Art+of+War", amazonUrl: "#" },
    ],
    "Japanese Philosophy": [
         { id: 7, title: "Bushido: The Soul of Japan", author: "Inazo Nitobe", imageUrl: "https://placehold.co/300x450/8e44ad/ecf0f1?text=Bushido", amazonUrl: "#" },
    ],
    "Indian Philosophy": [
        { id: 8, title: "The Bhagavad Gita", author: "Anonymous", imageUrl: "https://placehold.co/300x450/d35400/ecf0f1?text=Bhagavad+Gita", amazonUrl: "#" },
    ]
};


const allArticles = Object.values(philosophyData).flat();
const featuredArticles = Object.values(philosophyData).map(articles => articles[0]).slice(0, 5); // Get first article from first 5 categories

// --- STYLES OBJECT ---
const styles = {
    body: "font-['Inter',_sans-serif] bg-[#f8f7f4] text-[#2c3e50] antialiased",
    header: "bg-white sticky top-0 z-50 py-4 border-b border-gray-200/80",
    navLink: "px-3 py-2 text-sm font-medium text-[#2c3e50] transition-colors duration-300 rounded-md hover:bg-gray-100 hover:text-[#2c3e50]",
    navLinkActive: "font-semibold text-[#2c3e50] bg-gray-100",
    prose: "prose max-w-2xl mx-auto prose-p:text-lg prose-p:leading-relaxed prose-h1:text-4xl md:prose-h1:text-5xl prose-h2:text-3xl prose-h2:mt-16 prose-h2:pb-2 prose-h2:border-b prose-h2:border-gray-200 prose-a:text-[#34495e] prose-a:font-medium prose-a:no-underline hover:prose-a:underline prose-blockquote:border-l-4 prose-blockquote:border-[#34495e] prose-blockquote:pl-6 prose-blockquote:italic",
    articleCard: "article-card flex flex-col rounded-xl shadow-sm overflow-hidden bg-white hover:shadow-xl transition-all duration-300 cursor-pointer border border-gray-200/80 hover:-translate-y-1",
    formContainer: "bg-white rounded-xl p-8 md:p-12 shadow-sm border border-gray-200/80",
    formInput: "block w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#34495e] sm:text-sm transition-all",
    formLabel: "block text-sm font-medium text-gray-700 mb-2",
    submitBtn: "w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#34495e] hover:bg-[#2c3e50] transition-colors",
    pageTitle: "text-4xl lg:text-5xl font-bold tracking-tight text-center",
    pageSubtitle: "mt-3 text-lg text-gray-600 text-center max-w-2xl mx-auto",
    pageHeaderContainer: "bg-white rounded-xl p-8 shadow-sm border border-gray-200/80 mb-16",
    featureCard: "bg-white p-8 rounded-xl shadow-sm border border-gray-200/80",
    footer: "bg-white border-t border-gray-200/80 py-12",
};


// --- COMPONENTS ---

const Header = ({ setPage, activePage }) => {
    const [isDropdownOpen, setIsDropdownOpen] = useState(false);
    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
    const dropdownRef = useRef(null);

    useEffect(() => {
        const handleClickOutside = (event) => {
            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
                setIsDropdownOpen(false);
            }
        };
        document.addEventListener("mousedown", handleClickOutside);
        return () => document.removeEventListener("mousedown", handleClickOutside);
    }, []);
    
    const handleNav = (pageName, data = {}) => {
        setPage({ name: pageName, ...data });
        setIsDropdownOpen(false);
        setIsMobileMenuOpen(false);
        window.scrollTo(0, 0);
    };

    const NavLinks = ({ isMobile = false }) => (
        <>
            <a href="#" onClick={() => handleNav('home')} className={`${styles.navLink} ${activePage === 'home' ? styles.navLinkActive : ''}`}>Home</a>
            <div className={isMobile ? 'w-full' : 'relative'} ref={isMobile ? null : dropdownRef}>
                <button onClick={() => setIsDropdownOpen(!isDropdownOpen)} className={`${styles.navLink} flex items-center space-x-1 w-full justify-center md:w-auto ${activePage === 'category' || activePage === 'articleDetail' ? styles.navLinkActive : ''}`}>
                    <span>Articles</span>
                    <svg className="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                {isDropdownOpen && (
                    <div className={isMobile ? 'mt-1 space-y-1 pl-4' : 'absolute mt-2 w-64 bg-white rounded-md shadow-lg z-20 border border-gray-200/80 py-1'}>
                        {Object.keys(philosophyData).map(category => (
                            <a key={category} href="#" onClick={() => handleNav('category', { categoryName: category })} className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 truncate">{category}</a>
                        ))}
                    </div>
                )}
            </div>
            <a href="#" onClick={() => handleNav('books')} className={`${styles.navLink} ${activePage === 'books' ? styles.navLinkActive : ''}`}>Books</a>
            <a href="#" onClick={() => handleNav('about')} className={`${styles.navLink} ${activePage === 'about' ? styles.navLinkActive : ''}`}>About</a>
            <a href="#" onClick={() => handleNav('support')} className={`${styles.navLink} ${activePage === 'support' ? styles.navLinkActive : ''}`}>Support</a>
        </>
    );

    return (
        <header className={styles.header}>
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
                <div className="text-left cursor-pointer" onClick={() => handleNav('home')}>
                    <h1 className="text-2xl md:text-3xl font-bold tracking-tighter">Philosophy in Motion</h1>
                    <p className="text-sm text-gray-500 mt-1 hidden sm:block">Exploring ideas that shaped our world.</p>
                </div>
                <div className="flex items-center">
                    <nav className="hidden md:flex items-center space-x-2">
                        <NavLinks />
                    </nav>
                    <div className="md:hidden ml-4">
                        <button onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)} className="text-gray-600 hover:text-black">
                            <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
            {isMobileMenuOpen && (
                <div className="md:hidden mt-4 space-y-1 px-2 pb-3">
                    <NavLinks isMobile={true} />
                </div>
            )}
        </header>
    );
};

const ArticleCard = ({ article, onSelect }) => (
    <div className={styles.articleCard} onClick={() => onSelect('articleDetail', { articleId: article.id })}>
        <div className="flex-shrink-0">
             <img className="h-48 w-full object-cover" src={article.imageUrl.replace('1200x500', '600x400')} alt={article.title} />
        </div>
        <div className="flex-1 p-6 flex flex-col justify-between">
            <div className="flex-1">
                <p className="text-sm font-medium text-blue-700">{Object.keys(philosophyData).find(key => philosophyData[key].includes(article))}</p>
                <h3 className="mt-2 text-xl font-semibold text-gray-900">{article.title}</h3>
                <p className="mt-3 text-base text-gray-600">{article.excerpt}</p>
            </div>
        </div>
    </div>
);

const BookCard = ({ book }) => (
    <div className="bg-white rounded-xl shadow-sm border border-gray-200/80 p-6 flex flex-col items-center text-center transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
        <img src={book.imageUrl} alt={book.title} className="w-full h-auto object-cover rounded-md shadow-lg mb-4 max-w-[180px]" />
        <div className="flex flex-col flex-grow justify-between">
            <div>
                <h3 className="text-lg font-bold">{book.title}</h3>
                <p className="text-sm text-gray-500">{book.author}</p>
            </div>
            <a href={book.amazonUrl} target="_blank" rel="noopener noreferrer" className="mt-4 inline-block text-white bg-[#34495e] hover:bg-[#2c3e50] font-semibold py-2 px-5 rounded-md transition-colors text-sm">
                Buy on Amazon
            </a>
        </div>
    </div>
);

const ContactForm = () => {
    const handleSubmit = (e) => {
        e.preventDefault();
        alert('Message sent (demo)!');
        e.target.reset();
    };
    return (
        <div className="mt-24">
            <div className={`max-w-2xl mx-auto ${styles.formContainer}`}>
                <div className="text-center">
                    <h2 className="text-3xl font-bold tracking-tight">Get In Touch</h2>
                    <p className="mt-2 text-lg text-gray-600">Have a question, a suggestion, or just want to say hello?</p>
                </div>
                <form className="mt-8 space-y-6" onSubmit={handleSubmit}>
                    <div>
                        <label htmlFor="name" className={styles.formLabel}>Full Name</label>
                        <input type="text" name="name" id="name" required className={styles.formInput} />
                    </div>
                    <div>
                        <label htmlFor="email" className={styles.formLabel}>Email Address</label>
                        <input type="email" name="email" id="email" required className={styles.formInput} />
                    </div>
                    <div>
                        <label htmlFor="message" className={styles.formLabel}>Message</label>
                        <textarea name="message" id="message" rows="4" required className={styles.formInput}></textarea>
                    </div>
                    <div>
                        <button type="submit" className={styles.submitBtn}>Send Message</button>
                    </div>
                </form>
            </div>
        </div>
    );
};

const HeroSlideshow = ({ articles, setPage }) => {
    const [currentIndex, setCurrentIndex] = useState(0);
    const timeoutRef = useRef(null);

    const resetTimeout = () => {
        if (timeoutRef.current) {
            clearTimeout(timeoutRef.current);
        }
    }

    useEffect(() => {
        resetTimeout();
        timeoutRef.current = setTimeout(
            () => setCurrentIndex((prevIndex) => prevIndex === articles.length - 1 ? 0 : prevIndex + 1),
            5000
        );
        return () => resetTimeout();
    }, [currentIndex, articles.length]);

    const goToSlide = (index) => {
        setCurrentIndex(index);
    }

    const goToPrev = () => {
        setCurrentIndex(currentIndex === 0 ? articles.length - 1 : currentIndex - 1);
    }

    const goToNext = () => {
        setCurrentIndex(currentIndex === articles.length - 1 ? 0 : currentIndex + 1);
    }

    const currentArticle = articles[currentIndex];

    return (
        <div className="relative w-full h-[500px] rounded-xl shadow-lg border border-gray-200/80 overflow-hidden">
            {articles.map((article, index) => (
                <div key={article.id} className={`absolute top-0 left-0 w-full h-full transition-opacity duration-1000 ${index === currentIndex ? 'opacity-100' : 'opacity-0'}`}>
                    <img src={article.imageUrl.replace('1200x500', '1200x600')} alt={article.title} className="w-full h-full object-cover" />
                    <div className="absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent"></div>
                </div>
            ))}
            <div className="absolute bottom-0 left-0 p-8 md:p-12 text-white w-full h-full flex flex-col justify-end md:px-20">
                <div>
                    <span className="text-sm font-semibold bg-white/20 text-white px-3 py-1 rounded-full">{Object.keys(philosophyData).find(key => philosophyData[key].includes(currentArticle))}</span>
                    <h2 className="text-3xl lg:text-5xl font-bold mt-4 leading-tight max-w-3xl">{currentArticle.title}</h2>
                    <p className="text-lg text-gray-200 mt-2 max-w-2xl">{currentArticle.excerpt}</p>
                    <button onClick={() => setPage({ name: 'articleDetail', articleId: currentArticle.id })} className="mt-6 inline-block font-semibold bg-white text-black py-2 px-5 rounded-md hover:bg-gray-200 transition-colors">Read More</button>
                </div>
            </div>
            <div className="absolute top-1/2 -translate-y-1/2 w-full flex justify-between px-4 md:px-6 z-10">
                <button onClick={goToPrev} className="bg-white/50 hover:bg-white text-black p-2 rounded-full transition-colors"><svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 19l-7-7 7-7" /></svg></button>
                <button onClick={goToNext} className="bg-white/50 hover:bg-white text-black p-2 rounded-full transition-colors"><svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5l7 7-7 7" /></svg></button>
            </div>
             <div className="absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2 z-10">
                {articles.map((_, index) => (
                    <button key={index} onClick={() => goToSlide(index)} className={`w-3 h-3 rounded-full ${index === currentIndex ? 'bg-white' : 'bg-white/50'}`}></button>
                ))}
            </div>
        </div>
    );
};

const BackToTopButton = () => {
    const [isVisible, setIsVisible] = useState(false);

    const toggleVisibility = () => {
        if (window.pageYOffset > 300) {
            setIsVisible(true);
        } else {
            setIsVisible(false);
        }
    };

    const scrollToTop = () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    };

    useEffect(() => {
        window.addEventListener('scroll', toggleVisibility);
        return () => window.removeEventListener('scroll', toggleVisibility);
    }, []);

    return (
        <button onClick={scrollToTop} className={`fixed bottom-8 right-8 bg-[#34495e] hover:bg-[#2c3e50] text-white p-3 rounded-full shadow-lg transition-opacity duration-300 z-50 ${isVisible ? 'opacity-100' : 'opacity-0'}`}>
             <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 15l7-7 7 7" /></svg>
        </button>
    );
};


// --- PAGE COMPONENTS ---

const Home = ({ setPage }) => {
    const latestArticles = allArticles.slice(5, 9); // Get a different slice for latest articles

    return (
        <>
            <HeroSlideshow articles={featuredArticles} setPage={setPage} />
            
            <div className="mt-24 bg-white rounded-xl p-8 md:p-12 shadow-sm border border-gray-200/80">
                <h2 className="text-4xl font-bold tracking-tight text-center">Latest Articles</h2>
                <div className="mt-12 grid gap-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
                    {latestArticles.map(article => <ArticleCard key={article.id} article={article} onSelect={(name, data) => setPage({ name, ...data })} />)}
                </div>
            </div>
            <ContactForm />
        </>
    );
};

const Pagination = ({ currentPage, totalPages, onPageChange }) => {
    const pageNumbers = [];
    for (let i = 1; i <= totalPages; i++) {
        pageNumbers.push(i);
    }

    return (
        <nav className="flex justify-center items-center space-x-2 mt-16">
            <button 
                onClick={() => onPageChange(currentPage - 1)} 
                disabled={currentPage === 1}
                className="px-4 py-2 rounded-md text-sm font-medium bg-white border border-gray-300 text-gray-600 disabled:opacity-50 hover:bg-gray-50"
            >
                Previous
            </button>
            {pageNumbers.map(number => (
                <button 
                    key={number} 
                    onClick={() => onPageChange(number)}
                    className={`px-4 py-2 rounded-md text-sm font-medium border ${currentPage === number ? 'bg-[#2c3e50] text-white border-[#2c3e50]' : 'bg-white border-gray-300 text-gray-600 hover:bg-gray-50'}`}
                >
                    {number}
                </button>
            ))}
            <button 
                onClick={() => onPageChange(currentPage + 1)} 
                disabled={currentPage === totalPages}
                className="px-4 py-2 rounded-md text-sm font-medium bg-white border border-gray-300 text-gray-600 disabled:opacity-50 hover:bg-gray-50"
            >
                Next
            </button>
        </nav>
    );
};

const CategoryPage = ({ categoryName, setPage }) => {
    const [currentPage, setCurrentPage] = useState(1);
    const articlesPerPage = 6;

    const categoryArticles = philosophyData[categoryName] || [];
    const totalPages = Math.ceil(categoryArticles.length / articlesPerPage);

    const indexOfLastArticle = currentPage * articlesPerPage;
    const indexOfFirstArticle = indexOfLastArticle - articlesPerPage;
    const currentArticles = categoryArticles.slice(indexOfFirstArticle, indexOfLastArticle);

    const handlePageChange = (pageNumber) => {
        setCurrentPage(pageNumber);
        window.scrollTo(0, 0);
    };

    return (
        <>
            <div className={styles.pageHeaderContainer}>
                <h2 className={styles.pageTitle}>{categoryName}</h2>
                <p className={styles.pageSubtitle}>Exploring the rich traditions of {categoryName.toLowerCase()}.</p>
            </div>
            <div className="grid gap-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
                {currentArticles.map(article => <ArticleCard key={article.id} article={article} onSelect={(name, data) => setPage({ name, ...data })} />)}
            </div>
            {totalPages > 1 && (
                <Pagination currentPage={currentPage} totalPages={totalPages} onPageChange={handlePageChange} />
            )}
        </>
    );
};

const ArticleDetail = ({ articleId, setPage }) => {
    const article = allArticles.find(a => a.id === articleId);
    if (!article) return <div>Article not found.</div>;
    const categoryName = Object.keys(philosophyData).find(key => philosophyData[key].includes(article));

    return (
        <article>
            <header className="mb-12">
                <img src={article.imageUrl} alt="" className="w-full h-64 md:h-96 object-cover rounded-lg shadow-lg" />
            </header>
            <div className={styles.prose}>
                <div className="text-center mb-12">
                    <p className="text-sm font-semibold text-blue-700 uppercase tracking-wider cursor-pointer" onClick={() => setPage({ name: 'category', categoryName: categoryName })}>{categoryName}</p>
                    <h1 className="mt-2">{article.title}</h1>
                    <p className="mt-4 text-base text-gray-500">
                        Published on <time dateTime={article.publishedDate}>{article.publishedDate}</time>
                    </p>
                </div>
                <div dangerouslySetInnerHTML={{ __html: article.content }} />
                 <div className="my-12">
                    <iframe src={`https://www.youtube.com/embed/${article.youtubeId}`} title="YouTube video player" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen className="w-full aspect-video rounded-lg shadow-md"></iframe>
                </div>
                 <div className="text-center mt-16 pt-8 border-t border-gray-200">
                     <button onClick={() => setPage({ name: 'category', categoryName: categoryName })} className="text-blue-700 font-semibold hover:text-blue-900 no-underline hover:underline">&larr; Back to {categoryName}</button>
                </div>
            </div>
        </article>
    );
};

const About = ({ setPage }) => (
    <div className="max-w-5xl mx-auto">
        <div className={styles.pageHeaderContainer}>
            <h2 className={styles.pageTitle}>About This Project</h2>
            <p className={styles.pageSubtitle}>This platform is dedicated to exploring the great ideas of philosophy, psychology, and the humanities. Inspired by my YouTube channel, the goal is to create a library of clear, accessible, and well-researched content for anyone interested in deep thinking and self-exploration.</p>
        </div>

        <div className="text-center mb-16">
            <h2 className="text-3xl font-bold tracking-tight">What We Do</h2>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
            <div className={styles.featureCard}>
                 <div className="flex justify-center items-center h-16 w-16 rounded-full bg-gray-100 mx-auto">
                    <svg className="w-8 h-8 text-[#34495e]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                 </div>
                <h3 className="text-xl font-bold mt-5">Create Videos & Articles</h3>
                <p className="text-gray-600 mt-2">We produce high-quality animated videos and in-depth articles that explore complex ideas in a simple and engaging format.</p>
            </div>
             <div className={styles.featureCard}>
                <div className="flex justify-center items-center h-16 w-16 rounded-full bg-gray-100 mx-auto">
                    <svg className="w-8 h-8 text-[#34495e]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>
                </div>
                <h3 className="text-xl font-bold mt-5">Write Books</h3>
                <p className="text-gray-600 mt-2">Our books offer a deeper investigation into the topics covered in our videos, providing a more comprehensive learning experience.</p>
            </div>
             <div className={styles.featureCard}>
                <div className="flex justify-center items-center h-16 w-16 rounded-full bg-gray-100 mx-auto">
                   <svg className="w-8 h-8 text-[#34495e]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M12 14l9-5-9-5-9 5 9 5z" /><path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14z" /></svg>
                </div>
                <h3 className="text-xl font-bold mt-5">Produce Courses</h3>
                <p className="text-gray-600 mt-2">For those who want to learn at an even deeper level, we are developing courses that provide a structured educational path.</p>
            </div>
        </div>

        <div className={`mt-24 text-center ${styles.featureCard}`}>
             <h2 className="text-3xl font-bold">Support Our Work</h2>
             <p className="mt-4 max-w-2xl mx-auto text-lg text-gray-600">This project is funded by the generous support of our viewers. If you find value in our work, please consider contributing.</p>
             <button onClick={() => setPage({ name: 'support' })} className="mt-8 inline-block text-white bg-[#34495e] hover:bg-[#2c3e50] font-semibold py-3 px-6 rounded-md transition-colors">
                Go to Support Page
             </button>
        </div>
    </div>
);

const Support = () => (
     <div className="max-w-4xl mx-auto">
        <div className={styles.pageHeaderContainer}>
            <h2 className={styles.pageTitle}>Support Independent Content</h2>
            <p className={styles.pageSubtitle}>Your support allows for the creation of more in-depth content and helps keep this platform independent and ad-free.</p>
        </div>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
            <a href="#" className="block p-8 bg-white rounded-xl shadow-sm hover:shadow-lg border border-gray-200/80 transition-all duration-300 text-center hover:-translate-y-1">
                <h3 className="font-bold text-2xl text-gray-800">Patreon</h3>
                <p className="mt-2 text-gray-600">Join our community for exclusive content, behind-the-scenes updates, and more.</p>
                <span className="mt-6 inline-block text-white bg-[#34495e] hover:bg-[#2c3e50] font-semibold py-2 px-5 rounded-md transition-colors">Become a Patron</span>
            </a>
            <a href="#" className="block p-8 bg-white rounded-xl shadow-sm hover:shadow-lg border border-gray-200/80 transition-all duration-300 text-center hover:-translate-y-1">
                <h3 className="font-bold text-2xl text-gray-800">PayPal</h3>
                <p className="mt-2 text-gray-600">Make a one-time donation to show your appreciation and help cover costs.</p>
                 <span className="mt-6 inline-block text-white bg-[#34495e] hover:bg-[#2c3e50] font-semibold py-2 px-5 rounded-md transition-colors">Donate Now</span>
            </a>
        </div>
    </div>
);

const BooksPage = () => (
    <>
        <div className={styles.pageHeaderContainer}>
            <h2 className={styles.pageTitle}>Book Recommendations</h2>
            <p className={styles.pageSubtitle}>A curated list of essential reading for anyone interested in the great ideas of philosophy and the humanities.</p>
        </div>
        <div className="space-y-16">
            {Object.keys(booksData).map(category => (
                <div key={category}>
                    <h3 className="text-2xl font-bold border-b border-gray-200 pb-2 mb-8">{category}</h3>
                    <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8">
                        {booksData[category].map(book => <BookCard key={book.id} book={book} />)}
                    </div>
                </div>
            ))}
        </div>
    </>
);

const Footer = ({ setPage }) => (
    <footer className={styles.footer}>
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="grid grid-cols-1 md:grid-cols-5 gap-8">
                <div className="md:col-span-2">
                    <h3 className="text-lg font-semibold">Philosophy in Motion</h3>
                    <p className="mt-2 text-gray-500 text-sm">A platform for independent learning and exploration, making the great ideas of philosophy and the humanities accessible to everyone.</p>
                </div>
                <div>
                    <h3 className="text-sm font-semibold tracking-wider uppercase">Explore</h3>
                    <ul className="mt-4 space-y-2">
                        <li><a href="#" onClick={(e) => { e.preventDefault(); setPage({ name: 'home' }); }} className="text-sm text-gray-500 hover:text-gray-900">Home</a></li>
                        <li><a href="#" onClick={(e) => { e.preventDefault(); setPage({ name: 'books' }); }} className="text-sm text-gray-500 hover:text-gray-900">Books</a></li>
                        <li><a href="#" onClick={(e) => { e.preventDefault(); setPage({ name: 'about' }); }} className="text-sm text-gray-500 hover:text-gray-900">About</a></li>
                        <li><a href="#" onClick={(e) => { e.preventDefault(); setPage({ name: 'support' }); }} className="text-sm text-gray-500 hover:text-gray-900">Support</a></li>
                    </ul>
                </div>
                <div>
                    <h3 className="text-sm font-semibold tracking-wider uppercase">Article Categories</h3>
                    <ul className="mt-4 space-y-2">
                        {Object.keys(philosophyData).map(category => (
                            <li key={category}><a href="#" onClick={(e) => { e.preventDefault(); setPage({ name: 'category', categoryName: category }); }} className="text-sm text-gray-500 hover:text-gray-900">{category}</a></li>
                        ))}
                    </ul>
                </div>
                <div>
                    <h3 className="text-sm font-semibold tracking-wider uppercase">Follow Us</h3>
                    <div className="flex space-x-4 mt-4">
                        <a href="#" className="text-gray-400 hover:text-gray-500">
                            <span className="sr-only">YouTube</span>
                            <svg className="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fillRule="evenodd" d="M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.78 22 12 22 12s0 3.22-.42 4.814a2.506 2.506 0 0 1-1.768 1.768c-1.594.42-7.812.42-7.812.42s-6.218 0-7.812-.42a2.506 2.506 0 0 1-1.768-1.768C2 15.22 2 12 2 12s0-3.22.42-4.814a2.506 2.506 0 0 1 1.768-1.768C5.782 5 12 5 12 5s6.218 0 7.812.418zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" clipRule="evenodd" /></svg>
                        </a>
                        <a href="#" className="text-gray-400 hover:text-gray-500">
                             <span className="sr-only">Twitter</span>
                             <svg className="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.71v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" /></svg>
                        </a>
                         <a href="#" className="text-gray-400 hover:text-gray-500">
                            <span className="sr-only">Instagram</span>
                            <svg className="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fillRule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.345 2.525c.636-.247 1.363-.416 2.427-.465C9.793 2.013 10.147 2 12.575 2h.093zM12 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.88 1.44 1.44 0 000-2.88z" clipRule="evenodd" /></svg>
                        </a>
                    </div>
                </div>
            </div>
            <div className="mt-8 border-t border-gray-200 pt-8 text-sm text-gray-500 md:flex md:justify-between">
                <p>&copy; {new Date().getFullYear()} Philosophy in Motion, LLC. All Rights Reserved.</p>
                <div className="flex space-x-4 mt-4 md:mt-0">
                    <a href="#" className="hover:text-gray-900">Terms of Service</a>
                    <a href="#" className="hover:text-gray-900">Privacy Policy</a>
                </div>
            </div>
        </div>
    </footer>
);

// --- MAIN APP COMPONENT ---
export default function App() {
    const [page, setPage] = useState({ name: 'home', articleId: null, categoryName: null });

    const renderPage = () => {
        const mainContainerClasses = "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12";
        
        if (page.name === 'articleDetail') {
            return <ArticleDetail articleId={page.articleId} setPage={setPage} />;
        }
        
        return (
            <div className={mainContainerClasses}>
                {(() => {
                    switch (page.name) {
                        case 'home':
                            return <Home setPage={setPage} />;
                        case 'category':
                            return <CategoryPage categoryName={page.categoryName} setPage={setPage} />;
                        case 'about':
                            return <About setPage={setPage} />;
                        case 'support':
                            return <Support />;
                        case 'books':
                            return <BooksPage />;
                        default:
                            return <Home setPage={setPage} />;
                    }
                })()}
            </div>
        );
    };
    
    const getActivePage = () => {
        if (page.name === 'articleDetail' || page.name === 'category') return 'category';
        return page.name;
    }

    return (
        <div className={styles.body}>
            <Header setPage={setPage} activePage={getActivePage()} />
            <main>
                {renderPage()}
            </main>
            <Footer setPage={setPage} />
            <BackToTopButton />
        </div>
    );
}
